/*
 *  Parse + React
 *  v0.2.0
 *
 *  Copyright (c) 2015, Parse, LLC. All rights reserved.
 *
 *  You are hereby granted a non-exclusive, worldwide, royalty-free license to
 *  use, copy, modify, and distribute this software in source code or binary
 *  form for use in connection with the web services and APIs provided by Parse.
 *
 *  As with any software that integrates with the Parse platform, your use of
 *  this software is subject to the Parse Terms of Service
 *  [https://www.parse.com/about/terms]. This copyright notice shall be
 *  included in all copies or substantial portions of the software.
 *
 *  THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 *  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 *  FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 *  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 *  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 *  FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
 *  IN THE SOFTWARE.
 *
 */
!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,t.ParseReact=e()}}(function(){return function e(t,r,n){function i(s,o){if(!r[s]){if(!t[s]){var u="function"==typeof require&&require;if(!o&&u)return u(s,!0);if(a)return a(s,!0);var c=new Error("Cannot find module '"+s+"'");throw c.code="MODULE_NOT_FOUND",c}var l=r[s]={exports:{}};t[s][0].call(l.exports,function(e){var r=t[s][1][e];return i(r?r:e)},l,l.exports,e,t,r,n)}return r[s].exports}for(var a="function"==typeof require&&require,s=0;s<n.length;s++)i(n[s]);return i}({1:[function(e,t){"use strict";var r=e("./LocalSubscriptions"),n=e("./ParsePatches");n.applyPatches(),t.exports={currentUser:r.currentUser,Mixin:e("./Mixin"),Mutation:e("./Mutation")}},{"./LocalSubscriptions":5,"./Mixin":6,"./Mutation":7,"./ParsePatches":10}],2:[function(){},{}],3:[function(e,t){"use strict";var r=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),i=e("./Id"),a=function(){function e(t,n,a){if(r(this,e),!(t instanceof i))throw new TypeError("Cannot create a Delta with an invalid target Id");if(this.id=t,a&&a.destroy)this.map={},this.destroy=!0;else{this.map={};for(var s in n)"objectId"!==s&&(this.map[s]=n[s])}}return n(e,[{key:"id",value:void 0,enumerable:!0},{key:"map",value:void 0,enumerable:!0},{key:"destroy",value:void 0,enumerable:!0},{key:"merge",value:function(t){if(!(t instanceof e))throw new TypeError("Only Deltas can be merged");if(this.id.toString()!==t.id.toString())throw new Error("Only Deltas for the same Object can be merged");if(t.destroy&&(this.map={},this.destroy=!0),!this.destroy){for(var r in t.map)this.map[r]=t.map[r];return this}}}]),e}();t.exports=a},{"./Id":4}],4:[function(e,t){"use strict";var r=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),i=function(){function e(t,n){r(this,e),this.className=t,this.objectId=n}return n(e,[{key:"className",value:void 0,enumerable:!0},{key:"objectId",value:void 0,enumerable:!0},{key:"toString",value:function(){return this.className+":"+this.objectId}}],[{key:"fromString",value:function(t){var r=t.split(":");if(2!==r.length)throw new TypeError("Cannot create Id object from this string");return new e(r[0],r[1])}}]),e}();t.exports=i},{}],5:[function(e,t){"use strict";var r=e("./flatten"),n=e("./Id"),i=e("./ObjectStore"),a=e("./StubParse"),s={subscribers:{},observerCount:0,subscribe:function(e){var t=this,s="o"+this.observerCount++;this.subscribers[s]=e;var o;return a.User.current()?(o=new n("_User",a.User.current().id),i.getLatest(o)||i.storeObject(r(a.User.current())),e.onNext(i.getLatest(o))):a.Storage.async&&(a.User._currentAsync().then(function(t){null!==t&&(o=new n("_User",t.id),i.getLatest(o)||i.storeObject(r(t)),e.onNext(i.getLatest(o)))}),e.onNext(null)),{dispose:function(){delete t.subscribers[s]}}},update:function(e){var t=a.User.current();if(null!==t){for(var s in e)"id"!==s&&"objectId"!==s&&"className"!==s&&"sessionToken"!==s&&"createdAt"!==s&&"updatedAt"!==s&&t.set(s,e[s]);a.User._saveCurrentUser(t)}for(var o in this.subscribers){var u=null;t&&(u=i.getLatest(new n("_User",t.id)),null===u&&(u=r(t),i.storeObject(u))),this.subscribers[o].onNext(u)}}},o={currentUser:s};t.exports=o},{"./Id":4,"./ObjectStore":9,"./StubParse":12,"./flatten":17}],6:[function(e,t){"use strict";var r=e("./StubParse"),n=e("./warning"),i={componentWillMount:function(){if(this._subscriptions={},this.data=this.data||{},this._pendingQueries={},this._queryErrors={},!this.observe)throw new Error("Components using ParseReact.Mixin must declare an observe() method.");this._subscribe(this.props,this.state)},componentWillUnmount:function(){this._unsubscribe()},componentWillUpdate:function(e,t){(e!==this.props||t!==this.state)&&this._subscribe(e,t)},pendingQueries:function(){var e=[];for(var t in this._subscriptions)this._subscriptions[t].pending&&this._subscriptions[t].pending()&&e.push(t);return e},queryErrors:function(){if(Object.keys(this._queryErrors).length<1)return null;var e={};for(var t in this._queryErrors)e[t]=this._queryErrors[t];return e},refreshQueries:function(e){var t,r={};if("undefined"==typeof e)for(t in this._subscriptions)r[t]=this._subscriptions[t];else if("string"==typeof e)this._subscriptions[e]?r[e]=this._subscriptions[e]:n("Cannot refresh unknown query name: "+e);else{if(!Array.isArray(e))throw new TypeError("refreshQueries must receive a query name or an array of query names");for(var i=0;i<e.length;i++)this._subscriptions[e[i]]?r[e[i]]=this._subscriptions[e[i]]:n("Cannot refresh unknown query name: "+e[i])}for(t in r)this._pendingQueries[t]=!0,r[t].refresh();this.forceUpdate()},_subscribe:function(e,t){var i=this.observe(e,t),a={};for(var s in i)i[s].subscribe?(a[s]=i[s].subscribe({onNext:this._receiveData.bind(this,s),onError:i[s]instanceof r.Query?this._receiveError.bind(this,s):function(){}}),this._pendingQueries[s]=!0):n('The observation value "'+s+'" is not subscribable. Make sure you are returning the Query, and not fetching it yourself.');this._unsubscribe(),this._subscriptions=a},_unsubscribe:function(){for(var e in this._subscriptions)this._subscriptions[e].dispose();this._subscriptions={}},_receiveData:function(e,t){this.data[e]=t,delete this._pendingQueries[e],delete this._queryErrors[e],this.forceUpdate()},_receiveError:function(e,t){this._queryErrors[e]=t,this.forceUpdate()}};t.exports=i},{"./StubParse":12,"./warning":18}],7:[function(e,t){"use strict";function r(e){if(e instanceof u)return e;if(e.className&&e.objectId)return new u(e.className,e.objectId);throw new TypeError("Argument must be a plain Parse Object with a className and objectId")}function n(e){if(!e||"string"!=typeof e||"objectId"===e||"createdAt"===e||"updatedAt"===e)throw new TypeError("Invalid column name for mutation: "+e)}function i(e){e.hasOwnProperty("objectId")&&(f("Ignoring reserved field: objectId"),delete e.objectId),e.hasOwnProperty("className")&&(f("Ignoring reserved field: className"),delete e.className),e.hasOwnProperty("createdAt")&&(f("Ignoring reserved field: createdAt"),delete e.createdAt),e.hasOwnProperty("updatedAt")&&(f("Ignoring reserved field: updatedAt"),delete e.updatedAt)}var a=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},s=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=e("./Delta"),u=e("./Id"),c=e("./StubParse"),l=e("./UpdateChannel"),f=e("./warning"),d=function(){function e(t,r,n){a(this,e),this.action=t,this.target=r,this.data=n}return s(e,[{key:"action",value:void 0,enumerable:!0},{key:"target",value:void 0,enumerable:!0},{key:"data",value:void 0,enumerable:!0},{key:"dispatch",value:function(e){return"NOOP"===this.action?c.Promise.as({}):l.issueMutation(this,e||{})}},{key:"applyTo",value:function(e){var t=this;switch(this.action){case"SET":for(var r in this.data)e[r]=this.data[r];break;case"UNSET":delete e[this.data];break;case"INCREMENT":isNaN(e[this.data.column])?e[this.data.column]=this.data.delta:e[this.data.column]+=this.data.delta;break;case"ADD":e[this.data.column]=Array.isArray(e[this.data.column])?e[this.data.column].concat(this.data.value):this.data.value.concat([]);break;case"ADDUNIQUE":Array.isArray(e[this.data.column])?this.data.value.map(function(r){e[t.data.column].indexOf(r)<0&&e[t.data.column].push(r)}):e[this.data.column]=this.data.value.concat([]);break;case"REMOVE":if(!Array.isArray(e[this.data.column])||e[this.data.column].length<1)break;this.data.value.map(function(r){var n=e[t.data.column].indexOf(r);n>-1&&e[t.data.column].splice(n,1)})}}},{key:"generateDelta",value:function(e){if("DESTROY"===this.action&&this.target instanceof u)return new o(this.target,{},{destroy:!0});var t={};"UNSET"===this.action&&(t[this.data]={unset:!0});var r,n;if(n=this.target instanceof u?this.target:new u(this.target,e.objectId),"CREATE"===this.action||"SET"===this.action)for(r in this.data)t[r]={set:this.data[r]};for(r in e)"objectId"!==r&&(t[r]={set:e[r]}),"createdAt"===r&&(t.updatedAt={set:new Date(e.createdAt)});return new o(n,t)}}]),e}();t.exports={Mutation:d,Create:function(e,t){return t=t||{},i(t),new d("CREATE",e,t)},Destroy:function(e){return new d("DESTROY",r(e),null)},Set:function(e,t){return t&&Object.keys(t).length?(i(t),new d("SET",r(e),t)):(f("Performing a Set mutation with no changes: dispatching thiswill do nothing."),new d("NOOP","",{}))},Unset:function(e,t){return n(t),new d("UNSET",r(e),t)},Increment:function(e,t,i){if(n(t),"undefined"!=typeof i&&isNaN(i))throw new TypeError("Cannot increment by a non-numeric amount");var a={column:t,delta:"undefined"==typeof i?1:i};return new d("INCREMENT",r(e),a)},Add:function(e,t,i){n(t);var a={column:t,value:Array.isArray(i)?i:[i]};return new d("ADD",r(e),a)},AddUnique:function(e,t,i){n(t);var a={column:t,value:Array.isArray(i)?i:[i]};return new d("ADDUNIQUE",r(e),a)},Remove:function(e,t,i){n(t);var a={column:t,value:Array.isArray(i)?i:[i]};return new d("REMOVE",r(e),a)},AddRelation:function(e,t,i){n(t);var a=Array.isArray(i)?i:[i],s={column:t,targets:a.map(r)};return new d("ADDRELATION",r(e),s)},RemoveRelation:function(e,t,i){n(t);var a=Array.isArray(i)?i:[i],s={column:t,targets:a.map(r)};return new d("REMOVERELATION",r(e),s)}}},{"./Delta":3,"./Id":4,"./StubParse":12,"./UpdateChannel":15,"./warning":18}],8:[function(e,t){(function(r){"use strict";function n(e,t){if(t||(t=[]),t.indexOf(e)>-1)throw new Error("Tried to encode circular reference");if(Array.isArray(e))return t=t.concat([e]),e.map(function(e){return n(e,t)});if("[object Date]"===u.call(e))return{__type:"Date",iso:e.toJSON()};if(e instanceof s||e instanceof o.Object){var r=e instanceof s?e.objectId:e.id;if("undefined"==typeof r)throw new Error("Tried to save a pointer to an unsaved Parse Object");return{__type:"Pointer",className:e.className,objectId:r}}if(e instanceof o.GeoPoint)return e.toJSON();if(e instanceof o.File){if(!e.url())throw new Error("Tried to save a reference to an unsaved file");return{__type:"File",name:e.name(),url:e.url()}}if("object"==typeof e){if(e.objectId&&e.className)return{__type:"Pointer",className:e.className,objectId:e.objectId};t=t.concat(e);var i={};for(var a in e)i[a]=n(e[a],t);return i}return e}function i(e){return o._request(e).then(function(e){return e.createdAt&&(e.createdAt=new Date(e.createdAt)),e.updatedAt&&(e.updatedAt=new Date(e.updatedAt)),o.Promise.as(e)})}function a(e,t,r){var a,s="string"==typeof t?t:t.className,o="string"==typeof t?"":t.objectId;switch(e){case"CREATE":return i({method:"POST",route:"classes",className:s,data:n(r)});case"DESTROY":return i({method:"DELETE",route:"classes",className:s,objectId:o});case"SET":return i({method:"PUT",route:"classes",className:s,objectId:o,data:n(r)});case"UNSET":return a={},a[r]={__op:"Delete"},i({method:"PUT",route:"classes",className:s,objectId:o,data:a});case"INCREMENT":return a={},a[r.column]={__op:"Increment",amount:r.delta},i({method:"PUT",route:"classes",className:s,objectId:o,data:a});case"ADD":return a={},a[r.column]={__op:"Add",objects:n(r.value)},i({method:"PUT",route:"classes",className:s,objectId:o,data:a});case"ADDUNIQUE":return a={},a[r.column]={__op:"AddUnique",objects:n(r.value)},i({method:"PUT",route:"classes",className:s,objectId:o,data:a});case"REMOVE":return a={},a[r.column]={__op:"Remove",objects:n(r.value)},i({method:"PUT",route:"classes",className:s,objectId:o,data:a});case"ADDRELATION":return a={},a[r.column]={__op:"AddRelation",objects:n(r.targets)},i({method:"PUT",route:"classes",className:s,objectId:o,data:a});case"REMOVERELATION":return a={},a[r.column]={__op:"RemoveRelation",objects:n(r.targets)},i({method:"PUT",route:"classes",className:s,objectId:o,data:a})}throw new TypeError("Invalid Mutation action: "+e)}var s=e("./Id"),o=e("./StubParse"),u=Object.prototype.toString,c={execute:a};t.exports=c}).call(this,e("_process"))},{"./Id":4,"./StubParse":12,_process:2}],9:[function(e,t){(function(r){"use strict";function n(e){if(!(e.id instanceof y))throw new Error("Cannot store an object without an Id");var t={};return g[e.id]&&(t=g[e.id].queries),g[e.id]={data:e,queries:t},e.id}function i(e){if(!(e instanceof y))throw new TypeError("Argument must be a valid object Id");if(!g[e])return[];var t=Object.keys(g[e].queries);return delete g[e],t}function a(e,t){if(g[e])g[e].queries[t]=!0;else if(w[e])w[e][t]=!0;else{var r={};r[t]=!0,w[e]=r}}function s(e,t){g[e]?delete g[e].queries[t]:w[e]&&(delete w[e][t],Object.keys(w[e]).length<1&&delete w[e])}function o(e){return g[e]?Object.keys(g[e].queries):w[e]?Object.keys(w[e]):[]}function u(e,t,r){var n=_++,i={payloadId:n,date:r||new Date,mutation:t};return j[e]?j[e].push(i):j[e]=[i],n}function c(e){j[e]=[]}function l(e,t,r){var n,i=j[e];for(n=0;n<i.length;n++)if(i[n].payloadId===t){delete i[n].mutation,i[n].delta=r;break}if(n>=i.length)throw new Error("Optimistic Mutation completed, but was not found in the pending stack.");var a=Object.keys(r.map);if(n+1<i.length){var s=i[n+1].delta;"undefined"!=typeof s&&(r.merge(s),i.splice(n+1,1))}if(n>0){var o=i[n-1].delta;"undefined"!=typeof o&&(o.merge(r),i.splice(n,1))}var u=i[0].delta;if(u){i.shift();var c=f(u);return c.id=e,c}return{id:e,latest:p(r.id),fields:a}}function f(e){var t=e.id;if(e.destroy&&g[t])return delete g[t],{id:t,latest:null};var r,n={},i=g[t]&&g[t].data,a=[];if(i)for(r in i)n[r]=i[r];else n.id=t,n.objectId=t.objectId,n.className=t.className,a.push("objectId");for(r in e.map){a.push(r);var s=e.map[r];s.hasOwnProperty("unset")?delete n[r]:s.hasOwnProperty("set")&&(n[r]=s.set)}return i?g[t].data=n:g[t]={data:n,queries:{}},{id:t,latest:n,fields:a}}function d(e,t){var r=m(t);Array.isArray(e)||(e=[e]);var i,s;if(t._order)for(s={},i=0;i<t._order.length;i++){var o=t._order[i];"-"===o[0]&&(o=o.substring(1)),s[o]=!0}var u=[];if(t._include.length)for(i=0;i<t._include.length;i++)u.push(t._include[i].split("."));var c=[];for(i=0;i<e.length;i++){var l=v(e[i]),f=n(l);if(u.length)for(var d=0;d<u.length;d++)for(var h=u[d],b=e[i],p=0;p<h.length;p++)b=b.get(h[p]),n(v(b));var y=f;if(s){var g={};for(var w in s)g[w]=l[w];y={id:f,ordering:g}}c.push(y),a(l.id,r)}return c}function h(e){Array.isArray(e)||(e=[e]);for(var t=[],r=0;r<e.length;r++){var n=p(e[r]),i={};for(var a in n)i[a]=n[a];Object.freeze(i),t.push(i)}return t}function b(e,t){if(!g[e])return null;"undefined"==typeof t&&(t=[e.toString()]);var r=g[e].data,n={};for(var i in r){var a=r[i];if("Pointer"===a.__type){var s=new y(a.className,a.objectId);t.indexOf(s.toString())<0&&g[s]&&(t=t.concat([s.toString()]),a=b(s,t))}n[i]=a}return n}function p(e){if(j[e]&&j[e].length>0){var t,r,n={};if("CREATE"===j[e][0].mutation.action){t=j[e][0].mutation;var i=t.data;for(r in i)n[r]=i[r];var a=t.target instanceof y?t.target.className:t.target;return n.id=e instanceof y?e:new y(a,e),n.className=a,n.createdAt=n.updatedAt=j[e][0].date,n}if(g[e]){var s=b(e);for(r in s)n[r]=s[r]}for(var o=0;o<j[e].length;o++){if(t=j[e][o].mutation,"DESTROY"===t.action)return null;t.applyTo(n),n.updatedAt=j[e][o].date}return n}return g[e]?b(e):null}var v=e("./flatten"),y=e("./Id"),m=e("./QueryTools").queryHash,g={},w={},j={},_=0,S={storeObject:n,removeObject:i,addSubscriber:a,removeSubscriber:s,fetchSubscribers:o,stackMutation:u,destroyMutationStack:c,resolveMutation:l,commitDelta:f,storeQueryResults:d,getDataForIds:h,deepFetch:b,getLatest:p};t.exports=S}).call(this,e("_process"))},{"./Id":4,"./QueryTools":11,"./flatten":17,_process:2}],10:[function(e,t){"use strict";var r=e("./flatten"),n=e("./LocalSubscriptions"),i=e("./StubParse"),a=e("./SubscriptionManager"),s=i.User.prototype.signUp,o=i.User.prototype.logIn,u=i.User.prototype._linkWith,c=i.User.logOut,l={toPlainObject:function(){return r(this)},subscribe:function(e){return a.subscribeToQuery(this,e)},signUp:function(e,t){return s.call(this,e,t).then(function(){n.currentUser.update()})},logIn:function(e){return o.call(this,e).then(function(){n.currentUser.update()})},_linkWith:function(e,t){return u.call(this,e,t).then(function(){n.currentUser.update()})},logOut:function(){var e=c();return n.currentUser.update(),e}},f={applyPatches:function(){i.Object.prototype.toPlainObject||(i.Object.prototype.toPlainObject=l.toPlainObject),i.Query.prototype.subscribe||(i.Query.prototype.subscribe=l.subscribe),i.User.prototype.signUp=l.signUp,i.User.prototype.logIn=l.logIn,i.User.prototype._linkWith=l._linkWith,i.User.logOut=l.logOut}};t.exports=f},{"./LocalSubscriptions":5,"./StubParse":12,"./SubscriptionManager":14,"./flatten":17}],11:[function(e,t){"use strict";function r(e){if(!e.hasOwnProperty("$or"))return e;for(var t=[],r=0;r<e.$or.length;r++)t=t.concat(e.$or[r]);return t}function n(e){if("object"!=typeof e)return"string"==typeof e?'"'+e.replace(/\|/g,"%|")+'"':e;if(Array.isArray(e)){var t=e.map(n);return t.sort(),"["+t.join(",")+"]"}var r=[],i=Object.keys(e);i.sort();for(var a=0;a<i.length;a++)r.push(n(i[a])+":"+n(e[i[a]]));return"{"+r.join(",")+"}"}function i(e){if(!(e instanceof l.Query))throw new TypeError("Only a Parse Query can be hashed");var t,i,a=r(e._where||{}),s=[];if(Array.isArray(a)){var o={};for(i=0;i<a.length;i++){var u={},c=Object.keys(a[i]);c.sort();for(var f=0;f<c.length;f++)u[c[f]]=a[i][c[f]],o[c[f]]=!0;s.push(u)}t=Object.keys(o),t.sort()}else for(t=Object.keys(a),t.sort(),i=0;i<t.length;i++)s.push(a[t[i]]);var d=[t.join(","),n(s),n(e._include||[]),n(e._order||[]),e._limit,e._skip];return e.className+":"+d.join("|")}function a(e){var t=e.indexOf(":"),r=e.substring(0,t),n=e.indexOf("|"),i=e.substring(t+1,n),a=i.split(",");return{className:r,keys:a.length?a:[""]}}function s(e,t){for(var r=!0;r;){s=a=void 0,r=!1;var n=e,i=t;if(!(i instanceof l.Query)){for(var a in i)if(!o(n,a,i[a]))return!1;return!0}var s=n.id instanceof c?n.id.className:n.className;if(s!==i.className)return!1;e=n,t=i._where,r=!0}}function o(e,t,r){var n;if("$or"===t){for(n=0;n<r.length;n++)if(s(e,r[n]))return!0;return!1}if("$relatedTo"===t)return!1;if("object"!=typeof r)return Array.isArray(e[t])?e[t].indexOf(r)>-1:e[t]===r;var i;if(r.__type){if("Pointer"===r.__type)return r.className===e[t].className&&r.objectId===e[t].objectId;if(i=l._decode(t,r),Array.isArray(e[t])){for(n=0;n<e[t].length;n++)if(u(e[t][n],i))return!0;return!1}return u(e[t],i)}for(var a in r)switch(i=r[a],i.__type&&(i=l._decode(t,i)),a){case"$lt":if(e[t]>=i)return!1;break;case"$lte":if(e[t]>i)return!1;break;case"$gt":if(e[t]<=i)return!1;break;case"$gte":if(e[t]<i)return!1;break;case"$ne":if(u(e[t],i))return!1;break;case"$in":if(i.indexOf(e[t])<0)return!1;break;case"$nin":if(i.indexOf(e[t])>-1)return!1;break;case"$all":for(n=0;n<i.length;n++)if(e[t].indexOf(i[n])<0)return!1;break;case"$exists":if("undefined"==typeof e[t])return!1;break;case"$regex":if("object"==typeof i)return i.test(e[t]);for(var o="",c=-2,f=i.indexOf("\\Q");f>-1;)o+=i.substring(c+2,f),c=i.indexOf("\\E",f),c>-1&&(o+=i.substring(f+2,c).replace(/\\\\\\\\E/g,"\\E").replace(/\W/g,"\\$&")),f=i.indexOf("\\Q",c);o+=i.substring(Math.max(f,c+2));var d=new RegExp(o,r.$options||"");if(!d.test(e[t]))return!1;break;case"$options":break;case"$select":return!1;case"$dontSelect":return!1;default:return!1}return!0}var u=e("./equalObjects"),c=e("./Id"),l=e("./StubParse");t.exports={queryHash:i,keysFromHash:a,matchesQuery:s}},{"./Id":4,"./StubParse":12,"./equalObjects":16}],12:[function(e,t){"use strict";if("undefined"==typeof Parse){if("function"!=typeof e)throw new Error("Cannot initialize Parse + React: Parse is not defined.");try{t.exports=e("parse").Parse}catch(r){throw new Error("Failed to require Parse module. You need the Parse SDK installed to use Parse + React")}}else t.exports=Parse},{parse:void 0}],13:[function(e,t){(function(r){"use strict";function n(e){return e.id}function i(e,t,r){for(var n=0;n<e.length;n++){var i=e[n],a=1;if("-"===i[0]&&(i=i.substring(1),a=-1),t[i]<r[i])return-1*a;if(t[i]>r[i])return a}return 0}var a=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},s=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=e("./Id"),u=e("./ObjectStore"),c=function(){function e(t){a(this,e),this.originalQuery=t,this.pending=!1,this.subscribers={},this.resultSet=[],this.observationCount=0,this.issueQuery()}return s(e,[{key:"originalQuery",value:void 0,enumerable:!0},{key:"pending",value:void 0,enumerable:!0},{key:"subscribers",value:void 0,enumerable:!0},{key:"resultSet",value:void 0,enumerable:!0},{key:"observationCount",value:void 0,enumerable:!0},{key:"addSubscriber",value:function(e){var t="o"+this.observationCount++;this.subscribers[t]=e;var r=this.resultSet;return!r[0]||r[0]instanceof o||(r=r.map(n)),e.onNext(r.length?u.getDataForIds(r):[]),t}},{key:"removeSubscriber",value:function(e){return delete this.subscribers[e],Object.keys(this.subscribers).length}},{key:"issueQuery",value:function(){var e=this;this.pending=!0,this.originalQuery.find().then(function(t){e.pending=!1,e.resultSet=u.storeQueryResults(t,e.originalQuery),e.pushData()},function(t){e.pending=!1,e.pushData({error:t})})}},{key:"addResult",value:function(e,t){if(this.originalQuery._order){if(this.originalQuery._skip)return;for(var r=0,n=this.originalQuery._order;r<this.resultSet.length;){var a=i(n,e,this.resultSet[r].ordering);if(!(a>0))break;r++}for(var s={},o=0;o<n.length;o++){var u=n[o];"-"===u[0]&&(u=u.substring(1)),s[u]=e[u]}this.resultSet.splice(r,0,{id:e.id,ordering:s})}else this.resultSet.push(e.id);t||this.pushData()}},{key:"removeResult",value:function(e,t){for(var r=e.toString(),n=0;n<this.resultSet.length;n++){var i=this.resultSet[n];if(i instanceof o||(i=i.id),i.toString()===r)return this.resultSet.splice(n,1),void(t||this.pushData())}}},{key:"pushData",value:function(e){var t=e||[],r=this.resultSet;if(this.originalQuery._limit>-1&&(r=r.slice(0,this.originalQuery._limit)),!r[0]||r[0]instanceof o||(r=r.map(n)),"undefined"==typeof e){var i=r;!i[0]||i[0]instanceof o||(i=i.map(n)),t=u.getDataForIds(i)}for(var a in this.subscribers){var s=this.subscribers[a];Array.isArray(t)?s.onNext(t):t.error&&s.onError&&s.onError(t.error)}}}]),e}();t.exports=c}).call(this,e("_process"))},{"./Id":4,"./ObjectStore":9,_process:2}],14:[function(e,t){(function(r){"use strict";function n(e,t){var r=l(e),n=d[r];n||(n=new f(e),d[r]=n,s(e,r));var a=n.addSubscriber(t);return{refresh:function(){n.pending||n.issueQuery()},pending:function(){return n.pending},dispose:function(){i(n,r,a)}}}function i(e,t,r){if(e.removeSubscriber(r)<1){delete d[t];var n=c(t),i=h[n.className];if(!i)return;for(var a=0;a<n.keys.length;a++)delete i[n.keys[a]][t]}}function a(e){return d[e]||null}function s(e,t){var r=c(t).keys;r.length<1&&(r=[""]);var n=h[e.className];n||(n=h[e.className]={});for(var i=0;i<r.length;i++)n[r[i]]||(n[r[i]]={}),n[r[i]][t]=!0}function o(e,t){var r=h[e];if(!r)return[];var n={};t=t.concat("");for(var i=0;i<t.length;i++)if(r[t[i]])for(var a in r[t[i]])n[a]=!0;return Object.keys(n)}var u=e("./QueryTools"),c=u.keysFromHash,l=u.queryHash,f=e("./Subscription"),d={},h={},b={subscribeToQuery:n,getSubscription:a,queriesForFields:o};t.exports=b}).call(this,e("_process"))},{"./QueryTools":11,"./Subscription":13,_process:2}],15:[function(e,t,r){"use strict";function n(e,t){var r,n=e.target instanceof s?e.target:new s(e.target,"local-"+h++);if(!t.waitForServer){var o,f,b=[];"CREATE"===e.action?(r=c.stackMutation(n,e),f=c.getLatest(n),o={id:n,latest:f,fields:Object.keys(f)}):(r=c.stackMutation(n,e),b=c.fetchSubscribers(n),"DESTROY"===e.action?o={id:n,latest:null,fields:[]}:(f=c.getLatest(n),o={id:n,latest:f,fields:Object.keys(f)})),i(b,o)}var p=new l.Promise;return u.execute(e.action,e.target,e.data).then(function(a){var s,o,u=e.generateDelta(a);t.waitForServer?(o=c.fetchSubscribers(n),s=c.commitDelta(u),p.resolve(i(o,s))):(o=c.fetchSubscribers(n),s=c.resolveMutation(n,r,u),p.resolve(i(o,s)))},function(s){if(!t.waitForServer){var o;if("CREATE"===e.action){o=c.fetchSubscribers(n);for(var u=0;u<o.length;u++){var l=d.getSubscription(o[u]);l.removeResult(n)}c.destroyMutationStack(n)}else{var f=new a(n,{});o=c.fetchSubscribers(n);var h=c.resolveMutation(n,r,f);i(o,h)}}p.reject(s)}),p}function i(e,t){var r,n;if(null===t.latest){for(r=0;r<e.length;r++){if(n=d.getSubscription(e[r]),!n)throw new Error("Object is attached to a nonexistant subscription");n.removeResult(t.id)}return null}var i={};for(r=0;r<e.length;r++)i[e[r]]=!0,n=d.getSubscription(e[r]),f.matchesQuery(t.latest,n.originalQuery)?t.id.toString()!==t.latest.id.toString()?(n.removeResult(t.id,!0),c.removeSubscriber(t.id,e[r]),n.addResult(t.latest),c.addSubscriber(t.latest.id,e[r])):n.pushData():(n.removeResult(t.id),c.removeSubscriber(t.id,e[r]));var a=d.queriesForFields(t.latest.id.className,t.fields);for(r=0;r<a.length;r++)i[a[r]]||(n=d.getSubscription(a[r]),f.matchesQuery(t.latest,n.originalQuery)&&(n.addResult(t.latest),c.addSubscriber(t.latest.id,a[r])));if("_User"===t.latest.id.className){var s=l.User.current();s&&t.latest.id.objectId===s.id&&o.currentUser.update(t.latest)}return t.latest}Object.defineProperty(r,"__esModule",{value:!0}),r.issueMutation=n;var a=e("./Delta"),s=e("./Id"),o=e("./LocalSubscriptions"),u=e("./MutationExecutor"),c=e("./ObjectStore"),l=e("./StubParse"),f=e("./QueryTools"),d=e("./SubscriptionManager"),h=0;t.exports={issueMutation:n}},{"./Delta":3,"./Id":4,"./LocalSubscriptions":5,"./MutationExecutor":8,"./ObjectStore":9,"./QueryTools":11,"./StubParse":12,"./SubscriptionManager":14}],16:[function(e,t){"use strict";function r(e,t){if(typeof e!=typeof t)return!1;if("object"!=typeof e)return e===t;if(e===t)return!0;if("[object Date]"===n.call(e))return"[object Date]"===n.call(t)?+e===+t:!1;if(Array.isArray(e)){if(Array.isArray(t)){if(e.length!==t.length)return!1;for(var i=0;i<e.length;i++)if(!r(e[i],t[i]))return!1;return!0}return!1}if(Object.keys(e).length!==Object.keys(t).length)return!1;for(var a in e)if(!r(e[a],t[a]))return!1;return!0}var n=Object.prototype.toString;t.exports=r},{}],17:[function(e,t){"use strict";function r(e){return e instanceof a.Object?{__type:"Pointer",className:e.className,objectId:e.id}:n(e)}function n(e){if(Array.isArray(e))return e.map(r);if(!(e instanceof a.Object))return s("Attempted to flatten something that is not a Parse Object"),e;var t={id:new i(e.className,e.id),className:e.className,objectId:e.id};e.createdAt&&(t.createdAt=e.createdAt),e.updatedAt&&(t.updatedAt=e.updatedAt);for(var n in e.attributes){var o=e.attributes[n];t[n]=o instanceof a.Object?r(o):Array.isArray(o)?o.map(r):o}return t}var i=e("./Id"),a=e("./StubParse"),s=e("./warning");t.exports=n},{"./Id":4,"./StubParse":12,"./warning":18}],18:[function(e,t){"use strict";try{t.exports=function(){}}catch(r){t.exports=function(){}}},{}]},{},[1])(1)});